image: devnull-tools/maven

stages:
  - release

mvn:publish:sonatype:
  stage: release
  script:
    - mvn -P sign,public clean deploy
  dependencies:
    - mvn:package
  only:
    - tags

mvn:publish:internal:
  stage: release
  script:
    - mvn -P private clean deploy
  dependencies:
    - mvn:package
  only:
    - tags
    - /^release\/.*$/
